---
title: 加密货币原理
published: 2025-11-12
description:  '关于加密货币的介绍和实现原理'
image: ''
tags: [加密货币原理]
category: '区块链'
draft: false
---

 "很久之前就想把加密货币的原理的写一写，发现口头讲还是蛮难全面理解的。本文不会对于原理的每一个技术原理都讲透彻，只是为了让读者大致明白加密货币的原理，文章已尽可能写的简单易懂，但仍需要你有一定计算机基础：）"



# 前言

2008年，一篇署名为中本聪的论文”**Bitcoin: A Peer-to-Peer Electronic Cash System**“发表，文章描述了一种名为“比特币”的加密货币及其实现机制；次年，他发布了首个比特币软件，正式启动了比特币金融系统，我们也通常默认这是区块链技术实际应用的标志。

<center>

![](https://img.cdn1.vip/i/6913f5535f2d7_1762915667.webp)

</center>

原文（[bitcoin.pdf](https://bitcoin.org/bitcoin.pdf)）

相信每个通过这篇论文或其他方式理解加密货币的原理的人，无不感叹其中的技术美，我也不例外。所以我希望通过我的语言来详细讲解一下加密货币的原理。

# 金融系统中的去中心化

现代主流的金融系统中，系统的顺利运营需要依赖于**中心化组织**。

简单的例子，如银行，小明给小红转账1000人民币，在这个过程中，**“转账信息的记录”、“双方账户金额的改变”、“小明账户是否有1000余额足够支付这笔转账”、“转账和收账是否由两人本人账户进行”** 等等这些信息储存和验证，全都由“银行”这一中心组织完成。

换句话说，在现代主流金融系统中，我们默认对“银行”这类中心组织存在一种信任，这种信任的背书可能来源于其公信、国家等等，但无论怎样，我们都默认这些中心组织不会欺骗我们，可以保证我们金融数据的安全和真实。

论文中，中本聪提出了比特币这种去中心化的加密货币，即消除类似”银行“这类中心组织，使得以前由中心组织完成的存储和验证工作由用户自己来完成。

<center>

![](https://img.cdn1.vip/i/691418f1364c3_1762924785.webp)

</center>

# 加密货币

失去了中心组织，就要考虑中心组织的工作如何完成。这里以比特币为例说明（以下将比特币简称为**BTC**）。

比特币系统中，发生一次交易，我们需要完成以下工作来保证整个系统的完备性。

- **交易信息**，比如”小明给小红转账了一个BTC“

- **如何保证这条信息没有被修改**，即“小明告诉大家他给小红转了一个BTC”，大家收到这个信息时，这条信息没有被篡改为“小明给小红转了2个BTC”

- **如何验证这条信息是当事人自愿的**，即”验证小明给小红的转账是小明自愿的“

- **如何验证转账发起人余额足够**

- **这些交易信息该由谁来存储**

## 对应性

交易信息的发布非常容易理解，此处无需赘述。

**现在我们需要解决的第一个问题，当大家收到这条交易信息时，如何保证这条信息没有被篡改。**

现实中，小明借了小红1000人民币，小明通常会给小红打一张欠条，并在欠条上签名来确保欠条内容合理且有效。比特币系统中，同样的，发生一笔交易时，**交易发起者会公布这条交易记录，同时公布一个这条交易记录的数字签名，这个签名与这条交易记录相对应，一旦交易记录遭到篡改，记录就和数字签名无法对应，从而验证记录有无被篡改**。

比特币系统中，这一数字签名通过**SHA-256算法**实现，即哈希算法的一个分支。SHA-256的具体原理此处不赘述，它的具体功能如下

- **输入内容进入SHA-256函数，会输出一串长度为256的二进制数。输入的内容不同，输出的内容也不同**（有概率相同，这里涉及到哈希的撞库，但在实际应用中，SHA-256撞库的可能性几乎为0）
  
  <center>
  
  ![](https://img.cdn1.vip/i/6913fcb2e3eeb_1762917554.webp)

</center>

- **这个过程是不可逆的**。即SHA-256可以把输入内容转化为这一串哈希值（数字签名），但没有任何办法可以通过这串哈希值计算出原来的内容。

<mark>这样，我们就解决了第一个问题，如何保证交易信息没有被篡改。当交易者向大家发布交易信息时，会同时发布这串交易信息的哈希值。如果有人篡改了这串交易信息，其他人可以把这串交易信息用SHA-256转化为哈希值，和交易者发布的哈希值进行对比，发现哈希值不同，也就意味着这串交易信息得到了篡改。</mark>



## 可鉴别性

如果你看明白了上一个小节，聪明的你应该很快就能想到，如果我篡改交易信息，把篡改后的交易信息的哈希值和这条篡改的交易信息同时发布，验证不就通过了吗？

**这是我们要解决的下一个问题，即如何保证哈希值没有被修改。也就是如何保证这条哈希值是交易者本人发布的呢？**

比特币系统中，中本聪**引入了公钥和私钥，通过非对称加密实现可鉴别性**，具体过程如下。

一串原始信息例如“123456”，首先通过私钥使用某种算法对其进行加密，例如得到“whakfwak”；然后通过某种算法，对私钥本身进行计算，得到一个公钥，我们可以通过某种算法结合公钥，将加密信息“whakfwak”解密为原始信息“123456”。

<center>

![](https://img.cdn1.vip/i/69141e4767b81_1762926151.webp)

</center>
总结其特征如下

- **原始信息通过私钥加密为加密信息**

- **加密信息可以通过公钥解密为原始信息**

- **私钥可以通过计算得到公钥**

- **公钥无法通过计算得到私钥**
  
<center>

![](https://img.cdn1.vip/i/69141aed1d6f9_1762925293.webp)

</center>

在具体的交易系统中，是这样进行的

- 小明决定给小红转账一个BTC，所以他向外发布了三个信息：**交易信息本身“小明向小红转账一个BTC”，通过私钥加密过的交易信息哈希值**（即先用SHA-256将交易信息本身转化为其对应的哈希值，再通过我们这一节介绍的过程使用私钥把这个哈希值加密），**小明自己的公钥**。

- 其他人收到这条消息，可以**通过公钥对小明发布的加密哈希值解密，得到原始哈希值1，再把小明发布的交易信息本身进行SHA-256计算得到哈希值2，两条哈希值若相同，则意味着："这条交易信息没有被篡改"，"这条交易信息是小明本人发布的"**。

- 实际上我们无法把公钥和小明本人的身份对应起来，所以在实际运用中，**公钥即代表了你的身份，公钥就是一个账户，这个账户的交易、余额等等信息都是和这个公钥绑定的。在前面，这条交易信息的哈希值的加密过程需要私钥的参与，而私钥只有小明本人拥有，也就保证了这条公钥所对应的账户只有小明本人可以操控**。

<mark>至此，我们解决了交易信息的可鉴别性。</mark>

## 合法交易

**现在我们来解决第三个问题，如何验证小明有足够的余额来完成这笔交易。**

这个过程实际实现的方式会稍微复杂一点，但这不是论述的重点，我以一种简化、易理解的方式阐述。

**即存储每一笔交易信息。**
<center>

![](https://img.cdn1.vip/i/69141eaf6608c_1762926255.png)

</center>

比特币系统中发生的每一笔交易信息都会被存储。例如从最初小明的账户被创立，系统中就多了一条交易信息”出现了一个公钥为某某某的账户，该账户余额为0“。有一天，小庄给小明转了两个BTC，系统中就出现了一条交易信息”小庄给小明转账2个BTC“。

**当小明向外发布他给小红转账一个BTC时，其他人会从比特币系统的第一条交易信息开始搜寻**，搜寻到上面第一条信息，得到结论：小明账户为0；搜索到上面第二条信息，得到结论：小明账户为2。现在小明要转给小红一个BTC，发现余额满足，这条交易是合法的，大家都认可了，这条交易就会被添加到比特币系统的交易信息里面，也就意味着这次交易成功了。

<mark>至此，我们解决了交易的合法性。</mark>

## 交易信息存储和认可

**现在我们来解决下一个问题，没有中心化组织，这些全部的交易信息存储在哪里，如何确认交易是成功的。**

比特币给出的解决方案是，**将交易信息存储到每个进行比特币交易的用户的设备上**，即每个参与过比特币交易的用户的设备上，都存储有比特币自创始以来，全世界发生过的所有交易信息，从而验证交易的合法性。而为了确认交易是成功的，**当所有人都认可这一笔交易信息时，我们认定这笔交易成功了**。

这里就出现了三个问题需要解决

- **如何确保所有人设备上的交易信息都是同步的**，例如有些人的设备在某些时刻会断开互联网，他们如何保证下一次交易时自己设备上的交易信息是最新的

- **如何保证自己存储的这些交易信息都是成功的正确信息，不是被别人修改过的**

- **如何防止同一笔比特币被重复使用**，例如小明只有1个BTC，但他同时向外发布了两条交易信息，”小明转账给小红1个BTC“、”小明转账给小庄1个BTC“，由于网络传播速度的不同，有的用户会先收到第一条，有的用户会先收到第二条，在用户眼中，他们收到的信息都是合法的。如何避免这种情况出现

### 同步信息

这个问题很容易解决，即每个比特币用户上线时，他们都会**自动向附近已经同步了最新的交易信息的用户同步**，从而确保他们自己存储的交易信息是同步的。

### 交易信息正确性和非重复性

这两个问题我们结合在一起解决，我们要先介绍下比特币系统的**存储机制**。

**比特币交易信息的存储用到了区块链技术，即把若干条交易信息存储到一个块里面，称为一个区块，每一个区块存储着前一个区块的信息的哈希值。把区块一个一个连起来，形成了区块链。每个区块中的交易信息是经过检查的，即里面的交易信息都是未经篡改、账户本人发布、合法的，一个区块的全部信息都经过检查后，才会被连接到之前的区块链上。比特币网络中，大家只认可和维护同一条区块链。**

<center>

![](https://img.cdn1.vip/i/6914163905e34_1762924089.webphttps://img.cdn1.vip/i/6914163905e34_1762924089.webp)

</center>

**这个接受网络上零散的交易记录、进行检查交易记录、打包成区块的过程由”矿工“进行，** 他们完成这些工作后，会把打包好的区块发布到网络上，其他所有用户经过验证该区块没有问题后，都把这个区块连接到自己存储到区块链上。

现在出现了一个问题，即网络上存在很多”矿工“，他们接收到的交易信息不同，可能出现同一时间打包出来很多不同的区块，那用户该选择哪个区块链接到自己的区块链上呢？

中本聪给出的解决方案是**限制单位时间内区块的产生**，也就是加大打包区块的难度。这个过程也被称作”工作量证明“。

这个过程简述为，”矿工“打包好一个区块后，还要对区块进行一个**额外随机数运算**，运算成功后才意味着这个区块被打包成功了。而上传到网络后，其他用户可以很快验证这个区块是不是经过了随机数运算，只有验证成功才意味着这个区块可以被添加到区块链上。

这一过程具体原理不再赘述，如果你感兴趣可以去看一看[挖矿原理 - 区块链教程 - 廖雪峰的官方网站](https://liaoxuefeng.com/books/blockchain/bitcoin/mining/index.html)

该过程大致需要计算约2的72次方次才能成功，大大提高了打包区块的难度，使得单位时间内并不会产生大量的区块。

但”矿工“并不会自发的进行接受、打包、上传这些工作，所以比特币系统会给出一些奖励机制，每当一个”矿工“成功打包一个区块，并上传到网络且该区块得到了大家一致的验证和认可，被链接到区块链上以后，系统会奖励给”矿工“一定数额的比特币，来表示对”矿工“维护比特币系统交易信息和计算工作的认可。**接受交易信息，验证交易信息，打包成区块，对区块进行随机运算并上传到网络获得系统的比特币奖励，这个过程就是我们熟知的”挖矿“。**

现在还有一个问题是，即使限制了单位时间内区块的产出，还是有小几率同时出现不同的区块被上传到网络。

比特币系统给出的解决方案是**暂时同时保留这两个区块，将他们链接到区块链的不同分支，即让区块链分叉**。”矿工“继续进行下一个区块的计算，一个新的区块出现时，”矿工“选择把新区块链接到其中一个分支上，而另一个分支的交易信息则会失效，被认定为交易失败。即**同时出现区块时，区块链进行分叉，继续下个一个区块运算，直到出现一个最长的区块链分支，其他的分支作废，所有人都认可和维护这条最长的区块链**。
<center>

![](https://img.cdn1.vip/i/69141d0192e85_1762925825.webp)

</center>

<mark>至此我们可以解决我们本小节提到的两个问题。</mark>

- <mark>防止区块链被篡改。每个区块存储着前一个区块的信息的哈希值，一旦被篡改，区块链就会断裂，而比特币系统中大家只认可最长的一条区块链，如果想让被篡改的区块链成为最长的一条，篡改者需要自己进行区块运算，使得被篡改的区块链超过当前最长的区块链，而这所需要的算力是巨大的，基本上需要达到当前比特币网络中所有”矿工“算力总和的50%，这在实践中是不可能实现的</mark>

- <mark>防止同一笔比特币被重复使用。这个工作是由矿工完成的，他们收集交易信息时会验证有无重复使用。</mark>

**至此，我们已经实现完成了所有主流金融系统中中心化组织的工作，做到了比特币系统去中心化。**

# 杂谈

当我第一次完整了解加密货币的运作原理时，真的不禁为之感叹。对于区块链技术，去中心化、安全性、效率这三点通常只能满足其中两点，加密货币将重心放到了去中心化和安全性两点上。目前由于种种问题，加密货币还处于一个相较非主流的地位。由于其高波动，使得很多投机者加入，为其添上了”炒作“的标签；其背后无实体背书的金融属性使得其被冠以”郁金香泡沫“等，都是整个加密货币体系未来还需要解决的问题。但其技术蕴含的安全、透明、公共信任，也让未来看到了而更多可能性。

如果你觉得文章还是晦涩难懂，可以去看一看3blue的讲解视频[【官方双语】想知道比特币（和其他加密货币）的原理吗？](https://www.bilibili.com/video/BV11x411i72w/?spm_id_from=333.337.search-card.all.click&vd_source=b383b78cba392e0ada80182e5c78c2d0)

更多的技术细节和目前加密货币的常用机制可以参考廖雪峰老师的文章
[比特币](https://liaoxuefeng.com/books/blockchain/bitcoin/index.html)

谢谢你能读到这里，mua❤
